{% extends 'templates/base.html' %}

{% block title%}
    {{ movie }}
{% endblock %}


{% block content%}

    <h1 class="text-center" style="padding-top:20px;">{{ movie }}</h1>

    <!-- Poster -->
    <img src="{{ movie.poster.url }}" class="rounded mx-auto d-block" style="height: 600px;
                                                                              width: 400px;
                                                                              padding-top:30px;">

    <!-- Edit button -->
    {% if user.is_staff %}
    <div class="row">
        <div class="col-sm-12 text-center" style="padding-top: 20px;">
            <form method="GET" action="{% url 'movies:edit_movie' movie.id %}">
                <button href=""
                        type="submit"
                        class="btn btn-primary btn-lg center-block">
                            Edit
                </button>
            </form>
        </div>
    </div>
    {% endif %}

    
    <!-- Add Review button -->
    {% if user.is_authenticated %}
    <div class="row">
        <div class="col-sm-12 text-center" style="padding-top: 20px;">
            <form method="GET" action="{% url 'movies:add_review' movie.id %}">
                <button href=""
                        type="submit"
                        class="btn btn-primary btn-lg center-block">
                            Add Review
                </button>
            </form>
        </div>
    </div>
    {% endif %}

    <!-- Movie info table -->
    <dl class="row" style="padding-top: 100px;padding-left: 50px;padding-right: 50px;">
        <dt class="col-sm-3">Description</dt>
        <dd class="col-sm-9">{{ movie.descr }}</dd>

        <dt class="col-sm-3">Producer</dt>
        <dd class="col-sm-9">{{ movie.producer }}</dd>
      
        <dt class="col-sm-3">Release Date</dt>
        <dd class="col-sm-9">{{ movie.rel_date }}</dd>
      
        <dt class="col-sm-3">Genres</dt>
        <dd class="col-sm-9">
            {% for genre in movie.genres.values %}
                {{ genre.title }}
            {% endfor %}
        </dd>
      </dl>

      {% if reviews %}
      <h3 style="padding-top:20px;">Reviews</h3>
        {% for review in reviews %}
            <h6>{{ forloop.counter }}. {{ review.user }}, {{ review.pub_date }}</h6>
            <p>{{ review.text }}</p>
        {% endfor %}
    {% else %}
    <h3 style="padding-top:20px;">No reviews are available</h3>
    {% endif %}

{% endblock %}